(function(window,undefined){var JSONP=function(url,data,method,callback){url=url||"";data=data||{};method=method||"";callback=callback||function(){};if(typeof data=="object"){var queryString="";queryString=Object.keys(data).map(function(key){return encodeURIComponent(key)+"="+encodeURIComponent(data[key])}).join("&");url+="?"+queryString}else if(typeof data=="function"){method=data;callback=method}if(typeof method=="function"){callback=method;method="callback"}if(!Date.now)Date.now=function(){return(new Date).getTime()};
var timestamp=Date.now();var generatedFunction="jsonp"+Math.round(timestamp+Math.random()*1000001);console.log(generatedFunction);window[generatedFunction]=function(json){callback(json);delete window[generatedFunction]};if(url.indexOf("?")===-1)url=url+"?";else url=url+"&";var jsonpScript=document.createElement("script");jsonpScript.setAttribute("src",url+method+"="+generatedFunction);document.getElementsByTagName("head")[0].appendChild(jsonpScript)};window.JSONP=JSONP})(window);
